input                 // read n into #1
set #3 #1 0           // #3 = n (outer loop counter)
set #2 #0 1           // #2 = 1 (factorial result)

jeq #3 #0 0           // if n==0
j 9                   // skip to print (0! = 1)

// Outer loop: multiply #2 *= #3
set #1 #3 0           // #1 = #3 (inner loop multiplier)
set #0 #0 0           // #0 = 0 (accumulator for product)

// Inner loop: add #2 to accumulator #0 #1 times
add #0 #2 0           // #0 += #2
sub #1 #0 1           // #1 -= 1
jeq #1 #0 0           // if #1==0
j -3                  // repeat inner loop

// Update factorial and decrement outer counter
set #2 #0 0           // #2 = accumulated product
sub #3 #0 1           // decrement outer counter
jeq #3 #0 0           // if outer counter == 0
j -9                  // else repeat outer loop

// Done
print
exit
